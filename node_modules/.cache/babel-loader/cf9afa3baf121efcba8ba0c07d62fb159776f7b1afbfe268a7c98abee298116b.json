{"ast":null,"code":"import _slicedToArray from\"/Users/apple/Desktop/Complete React Developer in 2023 /capstone/crwn-clothing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/apple/Desktop/Complete React Developer in 2023 /capstone/crwn-clothing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useEffect,useReducer}from\"react\";import{onAuthStateChangedListener,createUserDocumentFromAuth}from\"../utils/firebase/firebase.utils\";//as the actual value you want to access\nimport{jsx as _jsx}from\"react/jsx-runtime\";export var UserContext=/*#__PURE__*/createContext({currentUser:null,setCurrentUser:function setCurrentUser(){return null;}});export var USER_ACTION_TYPES={SET_CURRENT_USER:'SET_CURRENT_USER'};var userReducer=function userReducer(state,action){console.log('dispatched');console.log(action);var type=action.type,payload=action.payload;switch(type){case USER_ACTION_TYPES.SET_CURRENT_USER:return _objectSpread(_objectSpread({},state),{},{currentUser:payload});default:throw new Error(\"Unhandled type \".concat(type,\" in userReducer\"));}};var INITIAL_STATE={currentUser:null};export var UserProvider=function UserProvider(_ref){var children=_ref.children;var _useReducer=useReducer(userReducer,INITIAL_STATE),_useReducer2=_slicedToArray(_useReducer,2),currentUser=_useReducer2[0].currentUser,dispatch=_useReducer2[1];console.log(currentUser);var setCurrentUser=function setCurrentUser(user){dispatch({type:USER_ACTION_TYPES.SET_CURRENT_USER,payload:user});};var value={currentUser:currentUser,setCurrentUser:setCurrentUser};useEffect(function(){var unsubscribe=onAuthStateChangedListener(function(user){if(user){createUserDocumentFromAuth(user);}setCurrentUser(user);});return unsubscribe;},[]);return/*#__PURE__*/_jsx(UserContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["createContext","useEffect","useReducer","onAuthStateChangedListener","createUserDocumentFromAuth","UserContext","currentUser","setCurrentUser","USER_ACTION_TYPES","SET_CURRENT_USER","userReducer","state","action","console","log","type","payload","Error","INITIAL_STATE","UserProvider","children","dispatch","user","value","unsubscribe"],"sources":["/Users/apple/Desktop/Complete React Developer in 2023 /capstone/crwn-clothing/src/contexts/user.context.jsx"],"sourcesContent":["import { createContext, useEffect, useReducer } from \"react\";\nimport { onAuthStateChangedListener, createUserDocumentFromAuth } from \"../utils/firebase/firebase.utils\";\n//as the actual value you want to access\nexport const UserContext = createContext({\n    currentUser: null,\n    setCurrentUser: () => null,\n});\n\nexport const USER_ACTION_TYPES = {\n    SET_CURRENT_USER: 'SET_CURRENT_USER'\n}\n\nconst userReducer = (state, action) => {\n    console.log('dispatched');\n    console.log(action);\n    const {type, payload} = action;\n\n    switch(type) {\n        case USER_ACTION_TYPES.SET_CURRENT_USER:\n            return {\n                ...state,\n                currentUser: payload\n            }\n            default:\n                throw new Error(`Unhandled type ${type} in userReducer`);\n    }\n}\n\nconst INITIAL_STATE = {\n    currentUser: null\n}\n\nexport const UserProvider = ({children}) => {\n    const [{currentUser}, dispatch] = useReducer(userReducer, INITIAL_STATE);\n    console.log(currentUser);\n\n    const setCurrentUser = (user) => {\n        dispatch({type: USER_ACTION_TYPES.SET_CURRENT_USER, payload: user})\n    }\n\n    const value = {currentUser, setCurrentUser};\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChangedListener((user) => {\n            if(user) {\n                createUserDocumentFromAuth(user);\n            }\n            setCurrentUser(user);\n        });\n        return unsubscribe;\n    }, [])\n    return <UserContext.Provider value={value}>{children}</UserContext.Provider>\n}"],"mappings":"qUAAA,OAASA,aAAa,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC5D,OAASC,0BAA0B,CAAEC,0BAA0B,KAAQ,kCAAkC,CACzG;AAAA,2CACA,MAAO,IAAMC,YAAW,cAAGL,aAAa,CAAC,CACrCM,WAAW,CAAE,IAAI,CACjBC,cAAc,CAAE,gCAAM,KAAI,EAC9B,CAAC,CAAC,CAEF,MAAO,IAAMC,kBAAiB,CAAG,CAC7BC,gBAAgB,CAAE,kBACtB,CAAC,CAED,GAAMC,YAAW,CAAG,QAAdA,YAAW,CAAIC,KAAK,CAAEC,MAAM,CAAK,CACnCC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC,CACzBD,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC,CACnB,GAAOG,KAAI,CAAaH,MAAM,CAAvBG,IAAI,CAAEC,OAAO,CAAIJ,MAAM,CAAjBI,OAAO,CAEpB,OAAOD,IAAI,EACP,IAAKP,kBAAiB,CAACC,gBAAgB,CACnC,sCACOE,KAAK,MACRL,WAAW,CAAEU,OAAO,GAExB,QACI,KAAM,IAAIC,MAAK,0BAAmBF,IAAI,oBAAkB,CAAC,CAEzE,CAAC,CAED,GAAMG,cAAa,CAAG,CAClBZ,WAAW,CAAE,IACjB,CAAC,CAED,MAAO,IAAMa,aAAY,CAAG,QAAfA,aAAY,MAAmB,IAAdC,SAAQ,MAARA,QAAQ,CAClC,gBAAkClB,UAAU,CAACQ,WAAW,CAAEQ,aAAa,CAAC,4CAAhEZ,WAAW,iBAAXA,WAAW,CAAGe,QAAQ,iBAC9BR,OAAO,CAACC,GAAG,CAACR,WAAW,CAAC,CAExB,GAAMC,eAAc,CAAG,QAAjBA,eAAc,CAAIe,IAAI,CAAK,CAC7BD,QAAQ,CAAC,CAACN,IAAI,CAAEP,iBAAiB,CAACC,gBAAgB,CAAEO,OAAO,CAAEM,IAAI,CAAC,CAAC,CACvE,CAAC,CAED,GAAMC,MAAK,CAAG,CAACjB,WAAW,CAAXA,WAAW,CAAEC,cAAc,CAAdA,cAAc,CAAC,CAE3CN,SAAS,CAAC,UAAM,CACZ,GAAMuB,YAAW,CAAGrB,0BAA0B,CAAC,SAACmB,IAAI,CAAK,CACrD,GAAGA,IAAI,CAAE,CACLlB,0BAA0B,CAACkB,IAAI,CAAC,CACpC,CACAf,cAAc,CAACe,IAAI,CAAC,CACxB,CAAC,CAAC,CACF,MAAOE,YAAW,CACtB,CAAC,CAAE,EAAE,CAAC,CACN,mBAAO,KAAC,WAAW,CAAC,QAAQ,EAAC,KAAK,CAAED,KAAM,UAAEH,QAAQ,EAAwB,CAChF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}