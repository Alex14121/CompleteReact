{"ast":null,"code":"import _objectSpread from\"/Users/apple/Desktop/Complete React Developer in 2023 /capstone/crwn-clothing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/apple/Desktop/Complete React Developer in 2023 /capstone/crwn-clothing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Desktop/Complete React Developer in 2023 /capstone/crwn-clothing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{initializeApp}from'firebase/app';import{getAuth,signInWithRedirect,signInWithPopup,GoogleAuthProvider,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from'firebase/auth';import{getFirestore,doc,getDoc,setDoc,collection,writeBatch,query,getDocs}from'firebase/firestore';var firebaseConfig={apiKey:\"AIzaSyBGjgVRE6xqAsncuDDvjGI9NmfYEg49NnI\",authDomain:\"crwn-clothing-db-94ccd.firebaseapp.com\",projectId:\"crwn-clothing-db-94ccd\",storageBucket:\"crwn-clothing-db-94ccd.appspot.com\",messagingSenderId:\"938524179560\",appId:\"1:938524179560:web:96d825ba298d63fcfa4fdd\"};// Initialize Firebase\nvar firebaseApp=initializeApp(firebaseConfig);var googleProvider=new GoogleAuthProvider();googleProvider.setCustomParameters({prompt:'select_account'});export var auth=getAuth();export var signInWithGooglePopup=function signInWithGooglePopup(){return signInWithPopup(auth,googleProvider);};export var signInWithGoogleRedirect=function signInWithGoogleRedirect(){return signInWithRedirect(auth,googleProvider);};export var db=getFirestore();export var addCollectionAndDocuments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(collectionKey,objectsToAdd){var collectionRef,batch;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:collectionRef=collection(db,collectionKey);batch=writeBatch(db);objectsToAdd.forEach(function(object){var docRef=doc(collectionRef,object.title.toLowerCase());batch.set(docRef,object);});_context.next=5;return batch.commit();case 5:console.log('done');case 6:case\"end\":return _context.stop();}}},_callee);}));return function addCollectionAndDocuments(_x,_x2){return _ref.apply(this,arguments);};}();export var getCategoriesAndDocuments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var collectionRef,q,querySnapshot,categoryMap;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:collectionRef=collection(db,'categories');q=query(collectionRef);_context2.next=4;return getDocs(q);case 4:querySnapshot=_context2.sent;categoryMap=querySnapshot.docs.reduce(function(acc,docSnapshot){var _docSnapshot$data=docSnapshot.data(),title=_docSnapshot$data.title,items=_docSnapshot$data.items;acc[title.toLowerCase()]=items;return acc;},{});return _context2.abrupt(\"return\",categoryMap);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getCategoriesAndDocuments(){return _ref2.apply(this,arguments);};}();export var createUserDocumentFromAuth=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(userAuth){var additionalInformation,userDocRef,userSnapshot,displayName,email,createdAt,_args3=arguments;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:additionalInformation=_args3.length>1&&_args3[1]!==undefined?_args3[1]:{};if(userAuth){_context3.next=3;break;}return _context3.abrupt(\"return\");case 3:userDocRef=doc(db,'users',userAuth.uid);_context3.next=6;return getDoc(userDocRef);case 6:userSnapshot=_context3.sent;if(userSnapshot.exists()){_context3.next=18;break;}displayName=userAuth.displayName,email=userAuth.email;createdAt=new Date();_context3.prev=10;_context3.next=13;return setDoc(userDocRef,_objectSpread({displayName:displayName,email:email,createdAt:createdAt},additionalInformation));case 13:_context3.next=18;break;case 15:_context3.prev=15;_context3.t0=_context3[\"catch\"](10);console.log('error creating the user',_context3.t0.massage);case 18:return _context3.abrupt(\"return\",userDocRef);case 19:case\"end\":return _context3.stop();}}},_callee3,null,[[10,15]]);}));return function createUserDocumentFromAuth(_x3){return _ref3.apply(this,arguments);};}();export var createAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(email,password){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(!email||!password)){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:_context4.next=4;return createUserWithEmailAndPassword(auth,email,password);case 4:return _context4.abrupt(\"return\",_context4.sent);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function createAuthUserWithEmailAndPassword(_x4,_x5){return _ref4.apply(this,arguments);};}();export var signInAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(email,password){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(!email||!password)){_context5.next=2;break;}return _context5.abrupt(\"return\");case 2:_context5.next=4;return signInWithEmailAndPassword(auth,email,password);case 4:return _context5.abrupt(\"return\",_context5.sent);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function signInAuthUserWithEmailAndPassword(_x6,_x7){return _ref5.apply(this,arguments);};}();export var signOutUser=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return signOut(auth);case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function signOutUser(){return _ref6.apply(this,arguments);};}();export var onAuthStateChangedListener=function onAuthStateChangedListener(callback){return onAuthStateChanged(auth,callback);};","map":{"version":3,"names":["initializeApp","getAuth","signInWithRedirect","signInWithPopup","GoogleAuthProvider","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","doc","getDoc","setDoc","collection","writeBatch","query","getDocs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseApp","googleProvider","setCustomParameters","prompt","auth","signInWithGooglePopup","signInWithGoogleRedirect","db","addCollectionAndDocuments","collectionKey","objectsToAdd","collectionRef","batch","forEach","object","docRef","title","toLowerCase","set","commit","console","log","getCategoriesAndDocuments","q","querySnapshot","categoryMap","docs","reduce","acc","docSnapshot","data","items","createUserDocumentFromAuth","userAuth","additionalInformation","userDocRef","uid","userSnapshot","exists","displayName","email","createdAt","Date","massage","createAuthUserWithEmailAndPassword","password","signInAuthUserWithEmailAndPassword","signOutUser","onAuthStateChangedListener","callback"],"sources":["/Users/apple/Desktop/Complete React Developer in 2023 /capstone/crwn-clothing/src/utils/firebase/firebase.utils.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { \n    getAuth, \n    signInWithRedirect, \n    signInWithPopup, \n    GoogleAuthProvider,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    signOut,\n    onAuthStateChanged\n}   from 'firebase/auth';\n\nimport {\n    getFirestore,\n    doc,\n    getDoc,\n    setDoc,\n    collection,\n    writeBatch,\n    query,\n    getDocs,\n} from 'firebase/firestore';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBGjgVRE6xqAsncuDDvjGI9NmfYEg49NnI\",\n    authDomain: \"crwn-clothing-db-94ccd.firebaseapp.com\",\n    projectId: \"crwn-clothing-db-94ccd\",\n    storageBucket: \"crwn-clothing-db-94ccd.appspot.com\",\n    messagingSenderId: \"938524179560\",\n    appId: \"1:938524179560:web:96d825ba298d63fcfa4fdd\"\n  };\n  \n  // Initialize Firebase\n  const firebaseApp = initializeApp(firebaseConfig);\n\n  const googleProvider = new GoogleAuthProvider();\n    \n  googleProvider.setCustomParameters({\n        prompt: 'select_account'\n  })\n\n  export const auth = getAuth();\n  export const signInWithGooglePopup = () => \n    signInWithPopup(auth, googleProvider);  \n  export const signInWithGoogleRedirect = () => \n    signInWithRedirect(auth, googleProvider);\n  \n  export const db = getFirestore();\n\n  export const addCollectionAndDocuments = async (collectionKey, objectsToAdd) => {\n    const collectionRef = collection(db, collectionKey);\n    const batch = writeBatch(db); \n\n    objectsToAdd.forEach((object) => {\n      const docRef = doc(collectionRef, object.title.toLowerCase());\n      batch.set(docRef, object);\n    })\n    await batch.commit();\n    console.log('done');\n  } \n\n  export const getCategoriesAndDocuments = async () => {\n    const collectionRef = collection(db, 'categories');\n    const q = query(collectionRef);\n\n    const querySnapshot = await getDocs(q);\n    const categoryMap = querySnapshot.docs.reduce((acc, docSnapshot) => {\n      const {title, items} = docSnapshot.data();\n      acc[title.toLowerCase()] = items;\n      return acc;\n    }, {});\n    \n    return categoryMap;\n  }\n\n\n  export const createUserDocumentFromAuth = async (userAuth, additionalInformation = {}) => {\n      if(!userAuth) return;\n    const userDocRef = doc(db, 'users', userAuth.uid)\n\n    const userSnapshot = await getDoc(userDocRef);\n\n    if(!userSnapshot.exists()) {\n        const {displayName, email} = userAuth;\n        const createdAt = new Date();\n\n        try {\n            await setDoc(\n                userDocRef, \n                {\n                displayName,\n                email,\n                createdAt,\n                ...additionalInformation\n                })\n        } catch (error) {\n            console.log('error creating the user', error.massage);\n        }\n    }\n    return userDocRef;\n  };\n\n  export const createAuthUserWithEmailAndPassword = async (email, password) => {\n    \n    if(!email || !password) return;\n\n    return await createUserWithEmailAndPassword(auth, email, password);\n  };\n\n  export const signInAuthUserWithEmailAndPassword = async (email, password) => {\n    \n    if(!email || !password) return;\n    \n    return await signInWithEmailAndPassword(auth, email, password);\n  };\n\n  export const signOutUser = async () => await signOut(auth);\n\n  export const onAuthStateChangedListener = (callback) => onAuthStateChanged(auth, callback);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}